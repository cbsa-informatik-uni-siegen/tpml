<?xml version="1.0"?>
<!--
	$Id: build.xml 415 2006-10-11 17:23:59Z benny $
	
	Copyright (c) 2007 Christian Fehler
-->
<project name="de.unisiegen.tpml.core" default="generate" basedir=".">
	<description>
		Buildfile for the de.unisiegen.tpml.core subproject.
    </description>
	
	<property name="libdir" value="${basedir}/lib" />

    <target name="generate" depends="l5" description="Generate parsers and lexers" />
	
	<property name="impldir" value="${basedir}/source-impl" />
	<property name="generateddir" value="${basedir}/source-generated" />
	
	<taskdef name="cup" classname="java_cup.anttask.CUPTask" classpath="${libdir}/java-cup-11a.jar" />
	<taskdef name="jflex" classname="JFlex.anttask.JFlexTask" classpath="${libdir}/JFlex-1.4.1.jar" />
	
	<target name="l5" description="Generates lexer and parser for L5">
		<!-- Expressions -->
		<jflex 
    		file="${impldir}/de/unisiegen/tpml/core/languages/l5/l5.flex"
    		destdir="${generateddir}"
			nobak="yes" />
		<cup
			srcfile="${impldir}/de/unisiegen/tpml/core/languages/l5/l5.cup"
			destdir="${generateddir}/de/unisiegen/tpml/core/languages/l5"
			package="de.unisiegen.tpml.core.languages.l5"
			parser="L5AbstractParser"
			symbols="L5Terminals"
			interface="yes"
			debug="no"
			expect="0"
			nonterms="no"
			nopositions="yes"
			dump_grammar="no" />

		<!-- Types -->
		<jflex 
    		file="${impldir}/de/unisiegen/tpml/core/languages/l5/l5type.flex"
    		destdir="${generateddir}"
			nobak="yes" />
		<cup
			srcfile="${impldir}/de/unisiegen/tpml/core/languages/l5/l5type.cup"
			destdir="${generateddir}/de/unisiegen/tpml/core/languages/l5"
			package="de.unisiegen.tpml.core.languages.l5"
			parser="L5AbstractTypeParser"
			symbols="L5TypeTerminals"
			interface="yes"
			debug="no"
			expect="0"
			nonterms="no"
			nopositions="yes"
			dump_grammar="no" />
	</target>
</project>