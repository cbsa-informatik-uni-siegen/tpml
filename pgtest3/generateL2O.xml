<?xml version="1.0"?>
<!--
	$Id: build.xml 415 2006-10-11 17:23:59Z benny $
	
	Copyright (c) 2007 Christian Fehler
-->
<project name="de.unisiegen.tpml.core" default="generate" basedir=".">
	<description>
		Buildfile for the de.unisiegen.tpml.core subproject.
    </description>
	
	<property name="libdir" value="${basedir}/lib" />

    <target name="generate" depends="generate-clean,l2o" description="Generate parsers and lexers" />
	
	<property name="impldir" value="${basedir}/source-impl" />
	<property name="generateddir" value="${basedir}/source-generated" />
	
	<taskdef name="cup" classname="java_cup.anttask.CUPTask" classpath="${libdir}/java-cup-11a.jar" />
	<taskdef name="jflex" classname="JFlex.anttask.JFlexTask" classpath="${libdir}/JFlex-1.4.1.jar" />
	
	<target name="generate-clean">
		<delete dir="${generateddir}/de/unisiegen/tpml/core/languages" />
	</target>
		
	<target name="l2o" description="Generates lexer and parser for L2O">
			<jflex 
	    		file="${impldir}/de/unisiegen/tpml/core/languages/l2o/l2o.flex"
	    		destdir="${generateddir}"
				nobak="yes" />
			<cup
				srcfile="${impldir}/de/unisiegen/tpml/core/languages/l2o/l2o.cup"
				destdir="${generateddir}/de/unisiegen/tpml/core/languages/l2o"
				package="de.unisiegen.tpml.core.languages.l2o"
				parser="L2OAbstractParser"
				symbols="L2OTerminals"
				interface="yes"
				debug="no"
				expect="0"
				nonterms="no"
				nopositions="yes"
				dump_grammar="no" />
		</target>
</project>